function addLoadEvent(e){var n=window.onload;"function"!=typeof n?window.onload=e:window.onload=function(){n(),e()}}function addScrollEvent(e){var n=window.onscroll;"function"!=typeof n?window.onscroll=e:window.onscroll=function(){n(),e()}}function celShowAnimation(){for(var e=document.getElementsByClassName("comment"),n=document.documentElement.scrollTop||document.body.scrollTop,t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,o=0;o<e.length;o++)-1!==e[o].className.search("cel-hide")&&t+n>e[o].offsetTop&&(e[o].className=e[o].className.replace("hide","show"))}function changeFontStyle(e,n){var t=document.documentElement.scrollTop||document.body.scrollTop;e.style.transform="scale("+(1+t/1e3)+")",e.style.opacity=n.toString()}function headerFontAnimation(){var e=document.getElementById("scaleHead"),n=document.documentElement.scrollTop||document.body.scrollTop,t=1;switch(!0){case 0===n:changeFontStyle(e,t);break;case n>0&&100>n:changeFontStyle(e,t-.2);break;case 200>n:changeFontStyle(e,t-.3);break;case 300>n:changeFontStyle(e,t-.4);break;case 400>n:changeFontStyle(e,t-.5);break;case 500>n:changeFontStyle(e,t-.6);break;case 600>n:changeFontStyle(e,t-.7);break;default:changeFontStyle(e,t-.8)}}function getStrLen(e){return e.replace(/[^\x00-\xff]/g,"xx").length}function formSubmit(e,n){var t=document.forms[0],o=t.elements;t.onsubmit=function(){var t=/\w\u4e00-\u9fa5/g,i=o.name;if(""===i.value)return e.innerHTML="不能为空",e.style.visibility="visible",e.style.color="red",!1;if(!t.test(i.value))return e.innerHTML="含有非法字符",e.style.visibility="visible",e.style.color="red",!1;var l=o.comment;return""===l.value?(n.innerHTML="说两句吧，亲",n.style.visibility="visible",n.style.color="red",!1):getStrLen(l.value)>250?(n.innerHTML="超过250个字符",n.style.visibility="visible",n.style.color="red",!1):!0}}function nameInteraction(e,n,t){e.onfocus=function(){n.innerHTML="请输入汉字、字母、数字、下划线",n.style.visibility="visible",n.style.color="grey"},e.onkeyup=function(){var e=getStrLen(this.value);e>0?(t.innerHTML=e+"个字符(汉字算两个字符)",t.style.visibility="visible"):t.style.visibility="hidden"},e.onblur=function(){var e=/[^\w\u4e00-\u9fa5]/g;e.test(this.value)?(n.innerHTML="含有非法字符",n.style.color="red"):""===this.value?(n.innerHTML="不能为空",n.style.color="red"):(n.innerHTML="OK!",n.style.color="green")}}function commentInteraction(e,n,t){e.onfocus=function(){n.innerHTML="请输入不超过250个字符，汉字算两个字符",n.style.visibility="visible",n.style.color="grey"},e.onkeyup=function(){var e=getStrLen(this.value);e>0?(t.innerHTML=e+"个字符(汉字算两个字符)",t.style.visibility="visible"):t.style.visibility="hidden"},e.onblur=function(){var e=getStrLen(this.value);e>250?(n.innerHTML="超过250个字符",n.style.color="red"):""===this.value?(n.innerHTML="说两句吧，亲",n.style.color="red"):(n.innerHTML="OK!",n.style.color="green")}}function formInteraction(){var e=document.getElementById("nameIndication"),n=document.getElementById("nameCnt"),t=document.getElementById("commentIndication"),o=document.getElementById("commentCnt"),i=document.forms[0].elements;nameInteraction(i.name,e,n),commentInteraction(i.comment,t,o),formSubmit(e,t)}addLoadEvent(celShowAnimation),addScrollEvent(celShowAnimation),addLoadEvent(headerFontAnimation),addScrollEvent(headerFontAnimation),addLoadEvent(formInteraction);